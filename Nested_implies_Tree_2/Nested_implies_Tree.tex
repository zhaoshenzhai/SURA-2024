\documentclass{amsart}
\input{preamble.sty}
\input{macros.sty}

\begin{document}
    \title{Tree of Orientations on a Nested Collection of Sets}
    \author{Zhaoshen Zhai}
    \date{\today}
    \maketitle

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$ (so that, in particular, $H$ is closed under complements). With the definitions in Section \ref{prelim}, we prove the following
    \begin{mainTheorem}[Propositions \ref{acyclic}, \ref{tree-fs}]\label{main}
        If $H$ is nested, then the graph $\mc{T}_H$, whose:
        \begin{itemize}
            \item Vertices are finitely-based orientations $p\subseteq H$;
            \item Edges are pairs $\l\{p,q\r\}$ such that $q=p\symdiff\l\{h,\lnot h\r\}$ for some $\subseteq$-minimal $h\in H$;
        \end{itemize}
        is acyclic. Furthermore, if $H$ is finitely-separating, then $\mc{T}_H$ is a tree.
    \end{mainTheorem}

    In particular, this applies to when $(X,G)$ is a graph and $H$ is a nested collection of cuts on $X$. No further assumptions on $X$ (like local-finiteness) is needed.

    \section{Preliminaries}\label{prelim}

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$, whose elements $h\in H$ we call \textit{half-spaces}.

    \begin{definition}
        Two elements $h,k\in H$ are \textit{nested} if $h^i\cap k^j=\em$ for some $i,j\in\l\{1,-1\r\}$, where $h^i\coloneqq h$ for $i=1$ and $h^i\coloneqq h^c$ otherwise. We say that $H$ is \textit{nested} if every pair $h,k\in H$ are nested.
    \end{definition}

    \subsection{Orientations}

    We give the standard definition of orientations on $H$ and characterize them as `consistent assignments of half-spaces to hyperplanes'.

    \begin{definition}
        An \textit{orientation} on $H$ is a subset $U\subseteq H$ such that
        \begin{enumerate}
            \item[1.] \textit{(Upward-closure)}. If $h\in U$ and $k\in H$ contains $h$, then $k\in U$.
            \item[2.] \textit{(Ultra)}. For each $h\in H$, exactly one of $h,h^c$ is contained in $U$.
        \end{enumerate}
    \end{definition}

    Consider the equivalence relation $\sim$ on $H$ generated by $h\sim h^c$ for all $h\in H$, whose classes are called \textit{hyperplanes} $\del h\coloneqq\l\{h,h^c\r\}$ where $\del:H\to H/\!\sim$ is the projection. We show that an orientation on $H$ is just a choice $\phi:H/\!\sim\,\to H$ of a half-space for each hyperplane, that is consistent in the sense below.

    \begin{proposition}\label{correspondence}
        An orientation $p\subseteq H$ is exactly the data of a function $\phi:H/\!\sim\,\to H$ such that $\phi(\del h)\in\del h$ and $\phi(\del h)\not\subseteq\phi(\del k)^c$ for every $h,k\in H$.
    \end{proposition}
    \begin{proof}
        Given an orientation $p\subseteq H$, let $\phi_p(\del h)\coloneqq h^i\in U$ for the unique $i\in\l\{1,-1\r\}$. That $\phi_p(\del h)\in\del h$ is clear, and if $\phi_p(\del h)\subseteq\phi_p(\del k)^c$, then $U$ contains both $\phi_p(\del k)$ and $\phi_p(\del k)^c$ by upward-closure, a contradiction.

        Conversely, given such a function $\phi:H/\!\sim\,\to H$, let $p_\phi\coloneqq\im\phi\subseteq H$. This is ultra since if $h\in H$ and $h^c\not\in p_\phi$, then $\phi(\del h)\in\del h=\l\{h,h^c\r\}$ implies $h\in p_\phi$. Furthermore, if $p_\phi\ni h\subseteq k$, then $k^c\in p_\phi$ implies $\phi(\del h)=h\subseteq k=\phi(\del k)^c$, a contradiction, so $k\in p_\phi$ by the above.

        Finally, given an orientation $p\subseteq H$, we have $h\in p$ iff $\phi_p(\del h)=h$, which occurs iff $h\in\im\phi_p=p_{\phi_p}$. Thus $p_{\phi_p}=p$. Conversely, given $\phi:H/\!\sim\,\to H$, and $h\in H$, we have $\phi_{p_{\phi}}(\del h)=h^i$ iff $h^i\in p_\phi=\im\phi$, which occurs iff $\phi(\del h)=h^i$. Thus $\phi_{p_\phi}=\phi$ too, as desired.
    \end{proof}

    \begin{definition}
        A \textit{base} for an orientation $p\subseteq H$ is a $\subseteq$-minimal subset $p_0\subseteq p$ such that $p=\,\,\uparrow\!p_0$, where
        \begin{equation*}
            \uparrow\! p_0\coloneqq\bigcup_{h\in p_0}\uparrow\! h\coloneqq\bigcup_{h\in p_0}\l\{k\in H\st k\supseteq h\r\}.
        \end{equation*}
        We say that $p$ is \textit{finitely-based} if it admits a finite basis.
    \end{definition}

    In the above correspondence, a base for $\phi:H/\!\sim\,\to H$ is a function $\phi_0\subseteq\phi$ where $\dom\phi_0$ is a $\subseteq$-minimal subset of hyperplanes such that $\phi_0$ extends uniquely to $\phi$. Thus, the finitely-based orientations are the ones determined by a choice of half-spaces from finitely-many hyperplanes.

    \subsection{Flipping basis elements}

    We now investigate the behaviour of orientation when its choice on a single half-space is modified. Although the proofs work without the characterization in Proposition \ref{correspondence}, it makes orientations a lot more intuitive to me, and so will be phrased this way.

    \begin{lemma}\label{tree-well-defined}
        Let $p\subseteq H$ be an orientation. Then $q\coloneqq p\symdiff\l\{h,h^c\r\}$ is an orientation iff $h\in p$ is $\subseteq$-minimal.

        Furthermore, if $p$ is finitely-based, then so is $q$.
    \end{lemma}
    \begin{proof}
        First, note that $\phi_q(\del h)=\phi_p(h)^c=h^c$ and $\phi_q=\phi_p$ away from $\del h$.
        \begin{itemize}
            \item[($\Rightarrow$).] If $q$ is an orientation and $p\ni k\subset h$, then we have a contradiction since
                \begin{equation*}
                    \phi_q(\del k)=\phi_p(\del k)=k\subseteq h=\phi_q(\del h)^c.
                \end{equation*}
            \item[($\Leftarrow$).]Conversely, let $h\in p$ be $\subseteq$-minimal and suppose that $q$ is not an orientation. Since only $\phi_q(\del h)=h^c$ differs from $\phi_p$, this can only occur if $\phi_q(\del h)\subseteq\phi_q(\del k)^c$ for some $k\in H$. But then
                \begin{equation*}
                    h^c=\phi_q(\del h)\subseteq\phi_q(\del k)^c=k^i\not\in p
                \end{equation*}
                for some unique $i\in\l\{1,-1\r\}$, so that $p\ni k^{-i}\subseteq h$ and contradicts that $h\in p$ is $\subseteq$-minimal.
        \end{itemize}
        Finally, suppose that $p$ is finitely-based. {\color{red}{???}}.
    \end{proof}

    \begin{remark}\label{minimal-iff_basis}
        If $h\in p$ is $\subseteq$-minimal and $p_0\subseteq p$ is any basis, then $h\in p_0$. Indeed, if $h\not\in p_0$, then there is some $h_0\in p_0\subseteq p$ with $h\supset h_0$, contradicting the minimality of $h$.

        Conversely, if $p_0\subseteq p$ is a basis, then every $h\in p_0$ is $\subseteq$-minimal in $p$. Indeed, if $h\supset k$ for some $k\in p$, then there is some $k_0\in p_0$ with $k\supseteq k_0$, so $h\supset k_0$. Thus $p=\,\,\uparrow\!(p_0\comp\l\{h\r\})$, contradicting the minimality of $p_0$.
    \end{remark}

    \section{The graph $\mc{T}_H$}

    Let $H\subseteq2^X$ be a sub-pocset as before. Using Lemma \ref{tree-well-defined}, we construct a graph $\mc{T}_H$ whose:
    \begin{itemize}
        \item \textit{Vertices} are finitely-based orientations $p\subseteq H$;
        \item \textit{Edges} are pairs $\l\{p,q\r\}$ such that $q=p\symdiff\l\{h,h^c\r\}$ for some $\subseteq$-minimal $h\in H$.
    \end{itemize}

    The goal of this section is to establish Theorem \ref{main}, stating that if $H$ is nested, then $\mc{T}_H$ is acyclic (Proposition \ref{acyclic}), and furthermore, $\mc{T}_H$ is a tree when $H$ is finitely-separating (Proposition \ref{tree-fs}).

    For the rest of this section, we let $H\subseteq2^X$ be a \textit{nested} sub-pocset.

    \subsection{Acyclicity of $\mc{T}_H$}

    Essentially, $\mc{T}_H$ is acyclic because any path in $\mc{T}_H$ (without backtracking) is induced by a sequence of the flipped half-spaces, and those form a \textit{strictly}-increasing chain.

    \begin{example}
        This fails if $H$ is non-nested. Indeed, let $X\coloneqq2\times2\coloneqq\l\{(x,y)\st x,y\in2\r\}$ and consider the set $H$ of all fibers $h_y\coloneqq\l\{(x,y)\st x\in2\r\}$ for each $y\in2$ and $h^x\coloneqq\l\{(x,y)\st y\in2\r\}$ for each $x\in2$. All orientations on $H$ are principal, of the form $\l\{h^x,h_y\r\}$ for $x,y\in2$, and the resulting graph $\mc{T}_H$ is a square.
    \end{example}

    \begin{definition}
        Fix $p_0\in V(\mc{T}_H)$ and $n\in\N$. A sequence $(h_i)_{i<n}\subseteq H$ is said to \textit{induce a path in $\mc{T}_H$ from $p_0$} if $(p_i)_{i<n}$, defined by $p_i\coloneqq p_{i-1}\symdiff\{h_{i-1},h_{i-1}^c\}$ for every $1\leq i<n$, is a path in $\mc{T}_H$ with each $h_i\in p_i$.
    \end{definition}

    \begin{lemma}\label{no-backtrack}
        A path from $p_0$ induced by $(h_i)_{i<n}$, $n\geq3$, has no backtracking iff $h_i\neq h_{i-1}^c$ for every $1\leq i<n$.
    \end{lemma}
    \begin{proof}
        Take $2\leq i\leq n$. It suffices to show that $p_{i-2}=p_i$ iff $h_{i-1}=h_{i-2}^c$.
        \begin{itemize}
            \item[($\Rightarrow$).] We have by definition that $p_i=p_{i-2}\cup\{h_{i-1}^c,h_{i-2}^c\}\comp\l\{h_{i-1},h_{i-2}\r\}$, so since $h_{i-2}\in p_{i-2}=p_i$, we have $h_{i-2}=h_{i-1}^c$ as desired.
            \item[($\Leftarrow$).] Again by definition, by noting that the basis-flipping cancels out.\qed
        \end{itemize}
    \end{proof}

    \begin{lemma}\label{strictly-inc}
        If $(h_i)_{i<n}$ induces a path in $\mc{T}_H$ with no backtracking, then $(h_i)_{i<n}$ is strictly increasing.
    \end{lemma}
    \begin{proof}
        By Lemma \ref{no-backtrack}, we have $h_i\neq h_{i-1}^c$ for every $1\leq i<n$. Thus, since $h_i\in p_i=p_{i-1}\cup\{h_{i-1}^c\}\comp\l\{h_{i-1}\r\}$, we see that $h_i\in p_{i-1}$. Clearly $h_i\neq h_{i-1}$. It suffices to remove the three cases when $h_i\subseteq h_{i-1}$, $h_{i-1}\subseteq h_i^c$, and $h_i^c\subseteq h_{i-1}$, since then nestedness of $H$ gives us $h_{i-1}\subsetneq h_i$, as desired.
        \begin{itemize}
            \item If $h_i\subseteq h_{i-1}$, then $h_{i-1}\in p_i$, contradicting the definition of $p_i$.
            \item If $h_{i-1}\subseteq h_i^c$, then $h_i^c\in p_{i-1}$ by upward-closure of $p_{i-1}$, a contradiction.
            \item If $h_i^c\subseteq h_{i-1}$, then $h_{i-1}\in p_{i+1}$ by upward-closure of $p_{i+1}\ni h_i^c$. But since $h_{i-1}\neq h_i^c$, we have by definition of $p_{i+1}$ that $h_{i-1}\in p_i$, a contradiction.\qed
        \end{itemize}
    \end{proof}

    \begin{proposition}\label{acyclic}
        $\mc{T}_H$ is acyclic.
    \end{proposition}
    \begin{proof}
        Let $(p_i)_{i<n}$ be a cycle in $\mc{T}_H$ induced by $(h_i)_{i<n}$. Since cycles are non-backtracking, we have $h_0\subsetneq h_0$ by Lemma \ref{strictly-inc}, a contradiction.
    \end{proof}

    \subsection{Connectedness of $\mc{T}_H$}

    In general, $\mc{T}_H$ need not be connected, as shown by the following

    \begin{example}[Tserunyan]\label{line}
        Let $X\coloneqq\omega_1\coloneqq\omega+1\coloneqq\omega\sqcup\l\{\omega\r\}$ and let
        \begin{equation*}
            H\coloneqq\l\{[0,n]\st n<\omega\r\}\cup\l\{(n,\omega]\st n<\omega\r\}\cup\l\{\omega,\l\{\omega\r\}\r\}.
        \end{equation*}
        We claim that every finitely-based orientation $p\subseteq H$ is principal (i.e., of the form $\widehat{x}\coloneqq\l\{h\in H\st h\ni x\r\}$ for some $x\in X$).
        \begin{center}
            \vspace{0.05in}
            \begin{minipage}{0.95\textwidth}
                \begin{proof}
                    For each $h\in H$, the hyperplane $\del h$ is either $\l\{[0,n],(n,\omega]\r\}$ for some $n<\omega$, or $\l\{\omega,\l\{\omega\r\}\r\}$. Consider the set $N_p\coloneqq\l\{n<\omega\st[0,n]\in p\r\}$, for which we have two cases.
                    \begin{itemize}
                        \item If $N_p=\em$, then $(n,\omega]\in p$ for all $p$. We claim that $p=\widehat{\omega}$. If $\omega\in p$, then $p$ is not (finitely-)based since $(n,\omega]$, for $n$ large enough, does not contain any basis element. Thus $\l\{\omega\r\}\in p$. Both types of half-spaces contain $\omega$, and those are the only half-spaces in $p$.
                        \item If $N_p\neq\em$, then there is a minimal $n<\omega$ with $[0,n]\in p$; we claim that $p=\widehat{n}$. Indeed, we have $(m,\omega]\in p$ if $m<n$, $[0,m]\in p$ if $m\geq n$, and $\omega\in p$ by upward-closure. All three types of half-spaces contain $n$, and those are the only half-spaces in $p$.\qed
                    \end{itemize}
                \end{proof}
            \end{minipage}
            \vspace{0.05in}
        \end{center}
        Now, each orientation $\widehat{n}$ is generated by the basis $\l\{[0,n],(n-1,\omega]\r\}$, and $\widehat{\omega}$ is generated by $\l\{\l\{\omega\r\}\r\}$. Thus, we see that $\widehat{\alpha},\widehat{\beta}$, where $\alpha<\beta\leq\omega$, is joined by an edge iff $\beta=\alpha+1$, where the $\subseteq$-minimal element $[0,\alpha]\in\widehat{\alpha}$ is flipped to $(\alpha,\omega]=(\beta-1,\omega]\in\widehat{\beta}$. This shows that $\mc{T}_H$ is disconnected, with $\omega$ an isolated point.
    \end{example}

    A sufficient criterion ruling out Example \ref{line} is given in Proposition \ref{tree-fs}, which needs the following

    \begin{lemma}\label{tree-lem}
        There is a path between $p,q\in V(\mc{T}_H)$ iff $p\symdiff q$ is finite, in which case $d(p,q)=(p\symdiff q)/2$.
    \end{lemma}
    \begin{proof}
        If $p\symdiff q=\l\{h_1,\dots,h_n\r\}\cup\l\{k_1,\dots,k_m\r\}$ with $p\comp q=\l\{h_i\r\}$ and $q\comp q=\l\{k_j\r\}$, then $h_i^c\in q\comp p$ and $k_j^c\in p\comp q$ for all $i<n$ and $j<m$, so $n=m$ and $q=p\cup\l\{h_i^c\r\}\comp\l\{h_i\r\}$. We claim that there is a permutation $\sigma\in S_n$ such that $(h_{\sigma(i)})$ induces a path from $p\eqqcolon p_0$, which is the desired path from $p$ to $q$. Choose a minimal $h\in\l\{h_i\r\}$, which is also minimal in $p$: if $k\subseteq h$ for some $k\in p$, then $h^c\subseteq k^c$, and hence $k^c\in q$, so $k=h_i\subseteq h$ for some $i$, forcing $k=h$. Set $p_1\coloneqq p\symdiff\l\{h,h^c\r\}$, which is an orientation by Lemma \ref{tree-well-defined}. Continuing in this manner by choosing a minimal element in $\l\{h_i\r\}\comp\l\{h\r\}$ gives us the desired path.

        Conversely, suppose that $\mc{T}_H$ is connected and let $(p_i)_{i<n}$ be a path from $p=p_0$ to $q=p_{n-1}$. Then, letting $h_i\coloneqq p_i\symdiff p_{i-1}$ for all $1\leq i<n$ gives us a sequence $(h_i)_{i<n}$ inducing such a path, whence $p\symdiff q$ consists of $\l\{h_i\r\}$ and their complements; hence, $p\symdiff q$ is finite.
    \end{proof}

    \begin{proposition}\label{tree-fs}
        If $H$ is finitely-separating (i.e., for every $h,h'\in H$, there are finitely-many $k\in H$ with $h\subseteq k\subseteq h'$), then $\mc{T}_H$ is connected.
    \end{proposition}
    \begin{proof}
        Fix $p,q\in V(\mc{T}_H)$. Since they are finitely-based, we can use Remark \ref{minimal-iff_basis} to choose minimal elements $h_1\in p\comp q$ and $h_2\in q\comp p$, and by assumption there are finitely-many $k\in H$ with $h_1\subseteq k\subseteq h_2^c$, say $k_1,\dots,k_n$. We claim that $p\symdiff q\subseteq\l\{k_i\r\}\cup\l\{k_i^c\r\}$, so the result follows from Lemma \ref{tree-lem}.

        Indeed, it suffices to show that $k\in\l\{k_i\r\}$ for every $k\in p\comp q$, for then any $k'\in q\comp p$ is in $k'\in\l\{k_i^c\r\}$. Let $k\in p\comp q$, which by minimality of $h_1$, implies $k\not\subseteq h_1$. Thus, either $k^c\subseteq h_1$, $k\subseteq h_1^c$, or $h_1\subseteq k$ by nestedness of $H$, and the first two cases are impossible since either case forces $h_1\in q$. A similar argument using the observation that $k^c\in q\comp p$, and hence $k^c\not\subseteq h_2$, shows that $k\subseteq h_2^c$. Thus $h_1\subseteq k\subseteq h_2^c$, as desired.
    \end{proof}
\end{document}
