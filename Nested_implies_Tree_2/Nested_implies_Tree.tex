\documentclass{amsart}
\input{preamble.sty}
\input{macros.sty}

\begin{document}
    \title{Tree of Orientations on a Nested Collection of Sets}
    \author{Zhaoshen Zhai}
    \date{\today}
    \maketitle

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$ (so that, in particular, $H$ is closed under complements). With the definitions in Section \ref{prelim}, we prove the following
    \begin{mainTheorem}[Propositions \ref{acyclic}, \ref{tree}]\label{main}
        If $H$ is nested, then the graph $\mc{T}_H$, whose:
        \begin{itemize}
            \item Vertices are finitely-based orientations on $H$;
            \item Edges are pairs $\l\{p,q\r\}$ such that $q=p\symdiff\l\{h,\lnot h\r\}$ for some minimal $h\in H$;
        \end{itemize}
        is acyclic. Furthermore, if $H$ is finitely-separating (or more generally, chain-vanishing), then $\mc{T}_H$ is a tree.
    \end{mainTheorem}

    In particular, this applies to when $(X,G)$ is a graph and $H$ is a nested collection of cuts on $X$. No further assumptions on $X$ (like local-finiteness) is needed.

    \section{Preliminaries}\label{prelim}

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$, whose elements $h\in H$ are called \textit{half-spaces}.

    \begin{definition}
        Two elements $h,k\in H$ are \textit{nested} if $h^i\cap k^j=\em$ for some $i,j\in\l\{1,-1\r\}$, where $h^i\coloneqq h$ for $i=1$ and $h^i\coloneqq h^c$ otherwise. We say that $H$ is \textit{nested} if every pair $h,k\in H$ are nested.
    \end{definition}

    \subsection{Orientations}

    We give the standard definition of orientations on $H$ and characterize them as `consistent assignments of half-spaces to hyperplanes'.

    \begin{definition}
        An \textit{orientation} on $H$ is a subset $U\subseteq H$ such that
        \begin{enumerate}
            \item[1.] \textit{(Upward-closure)}. If $h\in U$ and $k\in H$ contains $h$, then $k\in U$.
            \item[2.] \textit{(Ultra)}. For each $h\in H$, exactly one of $h,h^c$ is contained in $U$.
        \end{enumerate}
    \end{definition}

    Consider the equivalence relation $\sim$ on $H$ generated by $h\sim h^c$ for all $h\in H$, whose classes are called \textit{hyperplanes} $\delta h\coloneqq\l\{h,h^c\r\}$ where $\delta:H\to H/\!\sim$ is the projection. We show that an orientation on $H$ is just a choice $\phi:H/\!\sim\,\to H$ of a half-space for each hyperplane, that is consistent in the sense below.

    \begin{proposition}\label{correspondence}
        An orientation $p\subseteq H$ is exactly the data of a function $\phi:H/\!\sim\,\to H$ such that $\phi(\delta h)\in\delta h$ and $\phi(\delta h)\not\subseteq\phi(\delta k)^c$ for every $h,k\in H$.
    \end{proposition}
    \begin{proof}
        Given an orientation $p\subseteq H$, let $\phi_p(\delta h)\coloneqq h^i\in U$ for the unique $i\in\l\{1,-1\r\}$. That $\phi_p(\delta h)\in\delta h$ is clear, and if $\phi_p(\delta h)\subseteq\phi_p(\delta k)^c$, then $U$ contains both $\phi_p(\delta k)$ and $\phi_p(\delta k)^c$ by upward-closure, a contradiction.

        Conversely, given such a function $\phi:H/\!\sim\,\to H$, let $p_\phi\coloneqq\im\phi\subseteq H$. This is ultra since if $h\in H$ and $h^c\not\in p_\phi$, then $\phi(\delta h)\in\delta h=\l\{h,h^c\r\}$ implies $h\in p_\phi$. Furthermore, if $p_\phi\ni h\subseteq k$, then $k^c\in p_\phi$ implies $\phi(\delta h)=h\subseteq k=\phi(\delta k)^c$, a contradiction, so $k\in p_\phi$ by the above.

        Finally, given an orientation $p\subseteq H$, we have $h\in p$ iff $\phi_p(\del h)=h$, which occurs iff $h\in\im\phi_p=p_{\phi_p}$. Thus $p_{\phi_p}=p$. Conversely, given $\phi:H/\!\sim\,\to H$, and $h\in H$, we have $\phi_{p_{\phi}}(\del h)=h^i$ iff $h^i\in p_\phi=\im\phi$, which occurs iff $\phi(\del h)=h^i$. Thus $\phi_{p_\phi}=\phi$ too, as desired.
    \end{proof}

    \begin{definition}
        A \textit{base} for an orientation $p\subseteq H$ is a $\subseteq$-minimal subset $p_0\subseteq p$ such that $p=\,\,\uparrow\! p_0$, where
        \begin{equation*}
            \uparrow\! p_0\coloneqq\bigcup_{h\in p_0}\uparrow\! h\coloneqq\bigcup_{h\in p_0}\l\{k\in H\st k\supseteq h\r\}.
        \end{equation*}
        We say that $p$ is \textit{finitely-based} if it admits a finite basis.
    \end{definition}

    In the above correspondence, a base for $\phi:H/\!\sim\,\to H$ is a function $\phi_0\subseteq\phi$ where $\dom\phi_0$ is a $\subseteq$-minimal subset of hyperplanes such that $\phi_0$ extends uniquely to $\phi$. Thus, the finitely-based orientations are the ones determined by a choice of half-spaces from finitely-many hyperplanes.

    \subsection{Flipping basis elements}

    We now investigate the behaviour of orientation when its choice on a single half-space is modified. Although the proofs work without the characterization in Proposition \ref{correspondence}, it makes orientations a lot more intuitive to me, and so will be phrased this way.

    \begin{lemma}\label{tree-well-defined}
        If $p\subseteq H$ is an orientation, then $q\coloneqq p\symdiff\l\{h,h^c\r\}$ is an orientation iff $h\in p$ is $\subseteq$-minimal.

        Furthermore, if $p$ is finitely-based, then so is $q$.
    \end{lemma}
    \begin{proof}
        First, note that $\phi_q(\del h)=\phi_p(h)^c=h^c$ and $\phi_q=\phi_p$ away from $\del h$.
        \begin{itemize}
            \item[($\Rightarrow$).] If $q$ is an orientation and $p\ni k\subset h$, then $\phi_q(\del k)=\phi_p(\del k)=k\subseteq h=\phi_q(\del h)^c$, a contradiction.
            \item[($\Leftarrow$).] Let $h\in p$ be $\subseteq$-minimal and suppose that $q$ is not an orientation. Since only $\phi_q(\del h)=h^c$ differs from $\phi_p$, this can only occur if $\phi_q(\del h)\subseteq\phi_q(\del k)^c$ for some $k\in H$. But then
                \begin{equation*}
                    h^c=\phi_q(\del h)\subseteq\phi_q(\del k)^c=k^i\not\in p
                \end{equation*}
                for some unique $i\in\l\{1,-1\r\}$, so that $p\ni k^{-i}\subseteq h$ and contradicts that $h\in p$ is $\subseteq$-minimal.
        \end{itemize}
        Finally, suppose that $p$ is finitely-based witnessed by some finite $B\subseteq H/\!\sim$ and $\phi_0:B\to H$. Then $\del h\in B$ and $\phi_0(\del h)=h$, for otherwise $\phi_0$ extends to both $\phi_p$ and $\phi_q$. Letting $\phi_0':B\to H$ agree with $\phi_0$ on $B\comp\l\{\del h\r\}$ but setting $\phi_0'(\del h)\coloneqq h^c$ then gives a basis for $\phi_q$.
    \end{proof}

    \section{The graph $\mc{T}_P$}

    Fix a nested collection of non-empty subsets of a set $X$. Using Lemma \ref{tree-well-defined}, we construct a graph $\mc{T}_P$ whose:
    \begin{itemize}
        \item \textit{Vertices} of $\mc{T}_P$ are finitely-based orientations on $P$.
        \item \textit{Neighbors} of $\mc{U}\in V(\mc{T}_P)$ are $\mc{U}\symdiff\l\{A,A^c\r\}$ for every minimal $A\in\mc{U}$ with $A^c\in P$.
    \end{itemize}

    The goal of this section is to establish Theorem \ref{main}, stating that $\mc{T}_P$ is acyclic (Proposition \ref{acyclic}), and furthermore, $\mc{T}_P$ is a tree when $P$ is closed under complements (Proposition \ref{tree}).

    \begin{definition}
        Fix $\mc{U}_0\in V(\mc{T}_P)$ and $n\in\N$. A sequence $(A_i)_{i<n}\subseteq P$ is said to \textit{induce a path from $\mc{U}_0$} if $(\mc{U}_i)_{i<n}$, defined by $\mc{U}_i\coloneqq\mc{U}_{i-1}\symdiff\l\{A_{i-1},A_{i-1}^c\r\}$ for every $1\leq i<n$, is a path in $\mc{T}_P$ with each $A_i\in\mc{U}_i$.
    \end{definition}

    \begin{remark}
        Any path in $\mc{T}_P$ is induced by its sequence of flipped basis elements.
    \end{remark}

    \begin{lemma}\label{no-backtrack}
        Let $n\geq3$. A path in $\mc{T}_P$ from $\mc{U}_0$ induced by $(A_i)_{i<n}$ has no backtracking iff $A_i\neq A_{i-1}^c$ for every $1\leq i<n$.
    \end{lemma}
    \begin{proof}
        Take $2\leq i\leq n$. It suffices to show that $\mc{U}_{i-2}=\mc{U}_i$ iff $A_{i-1}=A_{i-2}^c$.
        \begin{itemize}
            \item[($\Rightarrow$).] We have by definition that $\mc{U}_i=\mc{U}_{i-2}\cup\l\{A_{i-1}^c,A_{i-2}^c\r\}\comp\l\{A_{i-1},A_{i-2}\r\}$, so since $A_{i-2}\in\mc{U}_{i-2}=\mc{U}_i$, we have $A_{i-2}=A_{i-1}^c$ as desired.
            \item[($\Leftarrow$).] Again by definition, by noting that the basis-flipping cancels out.\qed
        \end{itemize}
    \end{proof}

    \begin{lemma}\label{strictly-inc}
        If $(A_i)_{i<n}$ induces a path in $\mc{T}_P$ with no backtracking, then $(A_i)_{i<n}$ is strictly increasing.
    \end{lemma}
    \begin{proof}
        By Lemma \ref{no-backtrack}, we have $A_i\neq A_{i-1}^c$ for every $1\leq i<n$. Thus, since $A_i\in\mc{U}_i=\mc{U}_{i-1}\cup\l\{A_{i-1}^c\r\}\comp\l\{A_{i-1}\r\}$, we see that $A_i\in\mc{U}_{i-1}$. Clearly $A_i\neq A_{i-1}$. It suffices to remove the three cases when $A_i\subseteq A_{i-1}$, $A_{i-1}\subseteq A_i^c$, and $A_i^c\subseteq A_{i-1}$, since then nestedness of $P$ gives us $A_{i-1}\subsetneq A_i$, as desired.
        \begin{itemize}
            \item If $A_i\subseteq A_{i-1}$, then $A_{i-1}\in\mc{U}_i$, contradicting the definition of $\mc{U}_i$.
            \item If $A_{i-1}\subseteq A_i^c$, then $A_i^c\in\mc{U}_{i-1}$ by upward-closure of $\mc{U}_{i-1}$, a contradiction.
            \item If $A_i^c\subseteq A_{i-1}$, then $A_{i-1}\in\mc{U}_{i+1}$ by upward-closure of $\mc{U}_{i+1}\ni A_i^c$. But since $A_{i-1}\neq A_i^c$, we have by definition of $\mc{U}_{i+1}$ that $A_{i-1}\in\mc{U}_i$, a contradiction.\qed
        \end{itemize}
    \end{proof}

    \begin{proposition}\label{acyclic}
        $\mc{T}_P$ is acyclic.
    \end{proposition}
    \begin{proof}
        Let $(\mc{U}_i)_{i<n}$ be a cycle in $\mc{T}_P$ induced by $(A_i)_{i<n}$. Since cycles are non-backtracking, we have $A_0\subsetneq A_0$ by Lemma \ref{strictly-inc}, a contradiction.
    \end{proof}

    \begin{proposition}\label{tree}
        If $P$ is chain-vanishing, then $\mc{T}_P$ is connected (and hence a tree).
    \end{proposition}

    {\color{red}{
        \begin{proposition}%\label{tree}
            If $P$ is closed under complements, then $\mc{T}_P$ is connected (and hence a tree).
        \end{proposition}
        \begin{proof}
            If $\mc{U},\mc{U}'\in V(\mc{T}_P)$ are two finitely-based orientations on $P$, then swapping their basis elements one by one as in Remark ? gives us a path between $\mc{U}$ and $\mc{U}'$; the closure of $P$ is needed to ensure that those basis elements induce a path between the vertices, in that their complement lies in $P$.
        \end{proof}
    }}
\end{document}
