\documentclass{amsart}
\input{preamble.sty}
\input{macros.sty}

\begin{document}
    \title{Tree of Orientations on a Nested Collection of Sets}
    \author{Zhaoshen Zhai}
    \date{\today}
    \maketitle

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$ (so that, in particular, $H$ is closed under complements). With the definitions in Section \ref{prelim}, we prove the following
    \begin{mainTheorem}[Propositions \ref{acyclic}, \ref{tree-fs}, \ref{tree-cv}]\label{main}
        If $H$ is nested, then the graph $\mc{T}_H$, whose:
        \begin{itemize}
            \item Vertices are finitely-based orientations $p\subseteq H$;
            \item Edges are pairs $\l\{p,q\r\}$ such that $q=p\symdiff\l\{h,\lnot h\r\}$ for some $\subseteq$-minimal $h\in H$;
        \end{itemize}
        is acyclic. Furthermore, if $H$ is finitely-separating (or more generally, chain-vanishing), then $\mc{T}_H$ is a tree.
    \end{mainTheorem}

    In particular, this applies to when $(X,G)$ is a graph and $H$ is a nested collection of cuts on $X$. No further assumptions on $X$ (like local-finiteness) is needed.

    \section{Preliminaries}\label{prelim}

    Let $H\subseteq2^X$ be a sub-pocset for some fixed set $X$, whose elements $h\in H$ we call \textit{half-spaces}.

    \begin{definition}
        Two elements $h,k\in H$ are \textit{nested} if $h^i\cap k^j=\em$ for some $i,j\in\l\{1,-1\r\}$, where $h^i\coloneqq h$ for $i=1$ and $h^i\coloneqq h^c$ otherwise. We say that $H$ is \textit{nested} if every pair $h,k\in H$ are nested.
    \end{definition}

    \subsection{Orientations}

    We give the standard definition of orientations on $H$ and characterize them as `consistent assignments of half-spaces to hyperplanes'.

    \begin{definition}
        An \textit{orientation} on $H$ is a subset $U\subseteq H$ such that
        \begin{enumerate}
            \item[1.] \textit{(Upward-closure)}. If $h\in U$ and $k\in H$ contains $h$, then $k\in U$.
            \item[2.] \textit{(Ultra)}. For each $h\in H$, exactly one of $h,h^c$ is contained in $U$.
        \end{enumerate}
    \end{definition}

    Consider the equivalence relation $\sim$ on $H$ generated by $h\sim h^c$ for all $h\in H$, whose classes are called \textit{hyperplanes} $\del h\coloneqq\l\{h,h^c\r\}$ where $\del:H\to H/\!\sim$ is the projection. We show that an orientation on $H$ is just a choice $\phi:H/\!\sim\,\to H$ of a half-space for each hyperplane, that is consistent in the sense below.

    \begin{proposition}\label{correspondence}
        An orientation $p\subseteq H$ is exactly the data of a function $\phi:H/\!\sim\,\to H$ such that $\phi(\del h)\in\del h$ and $\phi(\del h)\not\subseteq\phi(\del k)^c$ for every $h,k\in H$.
    \end{proposition}
    \begin{proof}
        Given an orientation $p\subseteq H$, let $\phi_p(\del h)\coloneqq h^i\in U$ for the unique $i\in\l\{1,-1\r\}$. That $\phi_p(\del h)\in\del h$ is clear, and if $\phi_p(\del h)\subseteq\phi_p(\del k)^c$, then $U$ contains both $\phi_p(\del k)$ and $\phi_p(\del k)^c$ by upward-closure, a contradiction.

        Conversely, given such a function $\phi:H/\!\sim\,\to H$, let $p_\phi\coloneqq\im\phi\subseteq H$. This is ultra since if $h\in H$ and $h^c\not\in p_\phi$, then $\phi(\del h)\in\del h=\l\{h,h^c\r\}$ implies $h\in p_\phi$. Furthermore, if $p_\phi\ni h\subseteq k$, then $k^c\in p_\phi$ implies $\phi(\del h)=h\subseteq k=\phi(\del k)^c$, a contradiction, so $k\in p_\phi$ by the above.

        Finally, given an orientation $p\subseteq H$, we have $h\in p$ iff $\phi_p(\del h)=h$, which occurs iff $h\in\im\phi_p=p_{\phi_p}$. Thus $p_{\phi_p}=p$. Conversely, given $\phi:H/\!\sim\,\to H$, and $h\in H$, we have $\phi_{p_{\phi}}(\del h)=h^i$ iff $h^i\in p_\phi=\im\phi$, which occurs iff $\phi(\del h)=h^i$. Thus $\phi_{p_\phi}=\phi$ too, as desired.
    \end{proof}

    \begin{definition}
        A \textit{base} for an orientation $p\subseteq H$ is a $\subseteq$-minimal subset $p_0\subseteq p$ such that $p=\,\,\uparrow\!p_0$, where
        \begin{equation*}
            \uparrow\! p_0\coloneqq\bigcup_{h\in p_0}\uparrow\! h\coloneqq\bigcup_{h\in p_0}\l\{k\in H\st k\supseteq h\r\}.
        \end{equation*}
        We say that $p$ is \textit{finitely-based} if it admits a finite basis.
    \end{definition}

    In the above correspondence, a base for $\phi:H/\!\sim\,\to H$ is a function $\phi_0\subseteq\phi$ where $\dom\phi_0$ is a $\subseteq$-minimal subset of hyperplanes such that $\phi_0$ extends uniquely to $\phi$. Thus, the finitely-based orientations are the ones determined by a choice of half-spaces from finitely-many hyperplanes.

    \subsection{Flipping basis elements}

    We now investigate the behaviour of orientation when its choice on a single half-space is modified. Although the proofs work without the characterization in Proposition \ref{correspondence}, it makes orientations a lot more intuitive to me, and so will be phrased this way.

    \begin{lemma}\label{tree-well-defined}
        Let $p\subseteq H$ be an orientation. Then $q\coloneqq p\symdiff\l\{h,h^c\r\}$ is an orientation iff $h\in p$ is $\subseteq$-minimal.

        Furthermore, if $p$ is finitely-based, then so is $q$.
    \end{lemma}
    \begin{proof}
        First, note that $\phi_q(\del h)=\phi_p(h)^c=h^c$ and $\phi_q=\phi_p$ away from $\del h$.
        \begin{itemize}
            \item[($\Rightarrow$).] If $q$ is an orientation and $p\ni k\subset h$, then we have a contradiction since
                \begin{equation*}
                    \phi_q(\del k)=\phi_p(\del k)=k\subseteq h=\phi_q(\del h)^c.
                \end{equation*}
            \item[($\Leftarrow$).]Conversely, let $h\in p$ be $\subseteq$-minimal and suppose that $q$ is not an orientation. Since only $\phi_q(\del h)=h^c$ differs from $\phi_p$, this can only occur if $\phi_q(\del h)\subseteq\phi_q(\del k)^c$ for some $k\in H$. But then
                \begin{equation*}
                    h^c=\phi_q(\del h)\subseteq\phi_q(\del k)^c=k^i\not\in p
                \end{equation*}
                for some unique $i\in\l\{1,-1\r\}$, so that $p\ni k^{-i}\subseteq h$ and contradicts that $h\in p$ is $\subseteq$-minimal.
        \end{itemize}
        Finally, suppose that $p$ is finitely-based. {\color{red}{???}}.
    \end{proof}

    \begin{remark}
        If $h\in p$ is $\subseteq$-minimal and $p_0\subseteq p$ is any basis, then $h\in p_0$. Indeed, if $h\not\in p_0$, then there is some $h_0\in p_0\subseteq p$ with $h\supset h_0$, contradicting minimality.
    \end{remark}

    \section{The graph $\mc{T}_H$}

    Let $H\subseteq2^X$ be a nested sub-pocset as before. Using Lemma \ref{tree-well-defined}, we construct a graph $\mc{T}_H$ whose:
    \begin{itemize}
        \item \textit{Vertices} are finitely-based orientations $p\subseteq H$;
        \item \textit{Edges} are pairs $\l\{p,q\r\}$ such that $q=p\symdiff\l\{h,h^c\r\}$ for some $\subseteq$-minimal $h\in H$.
    \end{itemize}

    The goal of this section is to establish Theorem \ref{main}, stating that $\mc{T}_H$ is acyclic (Proposition \ref{acyclic}), and furthermore, that $\mc{T}_H$ is a tree when $P$ is finitely-separating (Proposition \ref{tree-fs}), or more generally, when $P$ is chain-vanishing (Proposition \ref{tree-cv}).

    \subsection{Acyclicity of $\mc{T}_H$}

    Essentially, this is because any path in $\mc{T}_H$ (without backtracking) is induced by a sequence of the flipped half-spaces, and those form a \textit{strictly}-increasing chain.

    \begin{definition}
        Fix $p_0\in V(\mc{T}_H)$ and $n\in\N$. A sequence $(h_i)_{i<n}\subseteq H$ is said to \textit{induce a path from $p_0$} if $(p_i)_{i<n}$, defined by $p_i\coloneqq p_{i-1}\symdiff\{h_{i-1},h_{i-1}^c\}$ for every $1\leq i<n$, is a path in $\mc{T}_H$ with each $h_i\in p_i$.
    \end{definition}

    \begin{remark}
        Any path in $\mc{T}_H$ is induced by its sequence of flipped basis elements.
    \end{remark}

    \begin{lemma}\label{no-backtrack}
        A path from $p_0$ induced by $(h_i)_{i<n}$, $n\geq3$, has no backtracking iff $h_i\neq h_{i-1}^c$ for every $1\leq i<n$.
    \end{lemma}
    \begin{proof}
        Take $2\leq i\leq n$. It suffices to show that $p_{i-2}=p_i$ iff $h_{i-1}=h_{i-2}^c$.
        \begin{itemize}
            \item[($\Rightarrow$).] We have by definition that $p_i=p_{i-2}\cup\{h_{i-1}^c,h_{i-2}^c\}\comp\l\{h_{i-1},h_{i-2}\r\}$, so since $h_{i-2}\in p_{i-2}=p_i$, we have $h_{i-2}=h_{i-1}^c$ as desired.
            \item[($\Leftarrow$).] Again by definition, by noting that the basis-flipping cancels out.\qed
        \end{itemize}
    \end{proof}

    \begin{lemma}\label{strictly-inc}
        If $(h_i)_{i<n}$ induces a path in $\mc{T}_H$ with no backtracking, then $(h_i)_{i<n}$ is strictly increasing.
    \end{lemma}
    \begin{proof}
        By Lemma \ref{no-backtrack}, we have $h_i\neq h_{i-1}^c$ for every $1\leq i<n$. Thus, since $h_i\in p_i=p_{i-1}\cup\{h_{i-1}^c\}\comp\l\{h_{i-1}\r\}$, we see that $h_i\in p_{i-1}$. Clearly $h_i\neq h_{i-1}$. It suffices to remove the three cases when $h_i\subseteq h_{i-1}$, $h_{i-1}\subseteq h_i^c$, and $h_i^c\subseteq h_{i-1}$, since then nestedness of $H$ gives us $h_{i-1}\subsetneq h_i$, as desired.
        \begin{itemize}
            \item If $h_i\subseteq h_{i-1}$, then $h_{i-1}\in p_i$, contradicting the definition of $p_i$.
            \item If $h_{i-1}\subseteq h_i^c$, then $h_i^c\in p_{i-1}$ by upward-closure of $p_{i-1}$, a contradiction.
            \item If $h_i^c\subseteq h_{i-1}$, then $h_{i-1}\in p_{i+1}$ by upward-closure of $p_{i+1}\ni h_i^c$. But since $h_{i-1}\neq h_i^c$, we have by definition of $p_{i+1}$ that $h_{i-1}\in p_i$, a contradiction.\qed
        \end{itemize}
    \end{proof}

    \begin{proposition}\label{acyclic}
        $\mc{T}_H$ is acyclic.
    \end{proposition}
    \begin{proof}
        Let $(p_i)_{i<n}$ be a cycle in $\mc{T}_H$ induced by $(h_i)_{i<n}$. Since cycles are non-backtracking, we have $h_0\subsetneq h_0$ by Lemma \ref{strictly-inc}, a contradiction.
    \end{proof}

    \subsection{Connectedness of $\mc{T}_H$}

    In general, $\mc{T}_H$ need not be connected, as shown by the following

    \begin{example}[Tserunyan]\label{line}
        Let $X\coloneqq\omega_1\coloneqq\omega+1\coloneqq\omega\sqcup\l\{\omega\r\}$ and let
        \begin{equation*}
            H\coloneqq\l\{[0,n]\st n<\omega\r\}\cup\l\{(n,\omega]\st n<\omega\r\}\cup\l\{\omega,\l\{\omega\r\}\r\}.
        \end{equation*}
        We claim that every orientation $p\subseteq H$ is principal (i.e., of the form $\widehat{x}\coloneqq\l\{h\in H\st h\ni x\r\}$ for some $x\in X$).
        \begin{center}
            \begin{minipage}{0.9\textwidth}
                \begin{proof}
                    For each $h\in H$, the hyperplane $\del h$ is either $\l\{[0,n],(n,\omega]\r\}$ for some $n<\omega$, or $\l\{\omega,\l\{\omega\r\}\r\}$. Consider the set $N_p\coloneqq\l\{n<\omega\st[0,n]\in p\r\}$, for which we have two cases.
                    \begin{itemize}
                        \item If $N_p=\em$, then $(n,\omega]\in p$ for all $p$. We claim that $p=\widehat{\omega}$. Indeed, $\omega\not\in p$\footnote{If $\omega\in p$, then {\color{red}{???}}.}, so $\l\{\omega\r\}\in p$. Both types of half-spaces contain $\omega$, and those are the only half-spaces in $p$.
                        \item If $N_p\neq\em$, then there is a minimal $n<\omega$ with $[0,n]\in p$; we claim that $p=\widehat{n}$. Indeed, we have $(m,\omega]\in p$ if $m<n$, $[0,m]\in p$ if $m\geq n$\footnote{If $(m,\omega]\in p$ for some $m>n$, then $[0,n]\subseteq(m,\omega]^c$, a contradiction.}, and $\omega\in p$ by upward-closure. All three types of half-spaces contain $n$, and those are the only half-spaces in $p$.\qed
                    \end{itemize}
                \end{proof}
            \end{minipage}
        \end{center}
        Now, each orientation $\widehat{n}$ is generated by the basis $\l\{[0,n],(n-1,\omega]\r\}$, and $\widehat{\omega}$ is generated by $\l\{\omega\r\}$. Thus, we see that $\widehat{\alpha},\widehat{\beta}$, where $\alpha<\beta\leq\omega$, is joined by an edge iff $\beta=\alpha+1$, where the $\subseteq$-minimal element $[0,\alpha]\in\widehat{\alpha}$ is flipped to $(\alpha,\omega]=(\beta-1,\omega]\in\widehat{\beta}$. This shows that $\mc{T}_H$ is disconnected, with $\omega$ an isolated point.
    \end{example}

    A sufficient criteria ruling out Example \ref{line} is given in the following

    \begin{proposition}\label{tree-fs}
        If $H$ is finitely-separating (i.e., for every $h_1,h_2\in H$, there are finitely-many $k\in H$ with $h_1\subseteq k\subseteq h_2$), then $\mc{T}_H$ is connected (and hence a tree).
    \end{proposition}

    \begin{proposition}\label{tree-cv}
        
    \end{proposition}

    {\color{red}{
        \begin{proposition}%\label{tree}
            If $H$ is closed under complements, then $\mc{T}_H$ is connected (and hence a tree).
        \end{proposition}
        \begin{proof}
            If $p,p'\in V(\mc{T}_H)$ are two finitely-based orientations on $P$, then swapping their basis elements one by one as in Remark ? gives us a path between $p$ and $p'$; the closure of $P$ is needed to ensure that those basis elements induce a path between the vertices, in that their complement lies in $P$.
        \end{proof}
    }}
\end{document}
