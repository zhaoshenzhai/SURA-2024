\documentclass{amsart}
\input{setup/preamble.sty}
\input{setup/macros.sty}

\begin{document}
    \title{Tree-like Graphings}
    \author{Zhaoshen Zhai}
    \date{\today}

    \begin{abstract}
        We present a streamlined exposition of a construction presented in \cite{CPTT23}, where it is proven that every locally-finite Borel graph with each component a quasi-tree induces a canonical treeable equivalence relation. {\color{red}{Write some more details...}}
    \end{abstract}

    \maketitle
    \vspace{-0.3in}

    \section{Introduction}

    The purpose of this note is to provide a streamlined proof of a particular case of a construction presented in \cite{CPTT23}, in order to better understand the general formalism developed therein. We attempt to make this note self-contained, but nevertheless urge the reader to refer to the original paper for more detailed discussion and generalizations of the results we have selected to include here.

    \subsection{Treeings of equivalence relations}

    A \textit{countable Borel equivalence relation (CBER)} on a standard Borel space $X$ is a Borel equivalence relation $E\subseteq X^2$ with each class countable. We are interested in special types of \textit{graphings} on a CBER $E\subseteq X^2$, i.e. a Borel graph $G\subseteq X^2$ whose connectedness relation is precisely $E$. For instance, a graphing of $E$ such that each component is a tree is called a \textit{treeing} of $E$, and the CBERs that admit a treeing are said to be \textit{treeable}. The main results of \cite{CPTT23} is to provide new sufficient criteria for treeability of CBERs, and in particular, they prove the following

    \begin{mainTheorem}[\cite{CPTT23}*{Theorem 1.1}]
        If a CBER admits a locally-finite graphing whose components are quasi-trees, then it is treeable.
    \end{mainTheorem}

    Recall that metric spaces $X$ and $Y$ are \textit{quasi-isometric} if they are isometric up to a bounded multiplicative and additive error, and $X$ is a \textit{quasi-tree} if it is quasi-isometric to a simplicial tree; see \cite{Gro93} and \cite{DK18}.

    \subsection{Outline of the proof}

    Roughly speaking, the existence of a quasi-isometry $G|C\to T_C$ to a simplicial tree $T_C$ for each component $C\subseteq X$ induces a collection $\mc{H}(C)$ of `cuts' (subsets $H\subseteq C$ with finite boundary such that both $H$ and $C\comp H$ are connected), which are `tree-like' in the sense that
    \begin{enumerate}
        \item[1.] $\mc{H}(C)$ is \textit{finitely-separating}: each pair $x,y\in C$ are separated by finitely-many $H\in\mc{H}(C)$, and
        \item[2.] $\mc{H}(C)$ is \textit{dense towards ends}: each end in $G|C$ has a neighborhood basis in $\mc{H}(C)$.
    \end{enumerate}
    These cuts have the structure of a pocset with non-trivial points isolated, which in turn provide exactly the data to construct a `median graph' whose vertices are `ultrafilters'\footnote{As in \cite{CPTT23}, we call them \textit{orientations} instead; see Definition \ref{def:orientation}.} thereof. Condition (2) then ensures that this graph has finite `hyperplanes', which allows us to apply a Borel `cycle-cutting' algorithm and obtain a canonical spanning tree thereof. Each step above can be done in a uniform way to each component $C\subseteq G$, giving us the desired treeing of the CBER.
    \begin{equation*}
        \textrm{Quasi-tree}
            \ \ \xrightarrow{\ref{ssec:graphs_with_dense_family_of_cuts}}\ \ 
        \begin{gathered}
            \textrm{Dense family} \\[-4pt]
            \textrm{of cuts}
        \end{gathered}
            \ \ \xrightarrow{\ref{ssec:pocsets_of_cuts}}\ \ 
        \begin{gathered}
            \textrm{Pocset w/} \\[-4pt]
            \textrm{non-triv. pts.} \\[-4pt]
            \textrm{isolated}
        \end{gathered}
            \ \ \xrightarrow{\ref{ssec:the_dual_median_graph_of_a_pocset}}\ \ 
        \begin{gathered}
            \textrm{Median graph} \\[-4pt]
            \textrm{w/ finite} \\[-4pt]
            \textrm{hyperplanes}
        \end{gathered}
            \ \ \xrightarrow{\ref{ssec:spanning_trees_of_median_graphs_with_finite_hyperplanes}}\ \ 
        \begin{gathered}
            \textrm{Canonical} \\[-4pt]
            \textrm{spanning tree}
        \end{gathered}
    \end{equation*}

    \begin{remark*}
        We follow \cite{CPTT23}*{Convention 2.7}, where for a family $\mc{H}\subseteq2^X$ of subsets of a fixed set $X$, we write $\mc{H}^\ast\coloneqq\mc{H}\comp\l\{\em,X\r\}$ for the \textit{non-trivial} elements of $\mc{H}$.
    \end{remark*}

    \pagebreak

    \section{Detailed Constructions}

    \subsection{Graphs with dense families of cuts}\label{ssec:graphs_with_dense_family_of_cuts}

    Let $(X,G)$ be a locally-finite graph.

    \subsubsection{End compactification of graphs}

    \subsection{Pocsets of cuts}\label{ssec:pocsets_of_cuts}

    The family $\mc{H}_{\diam\del\leq R}(X)$ of cuts have the structure of a `profinite pocset', which we first study abstractly. We then deduce some properties of the pocset induced by a \textit{dense} family of cuts.

    \subsubsection{Abstract profinite pocsets}\label{sssec:profinite_pocsets}


    \begin{definition}
        A \textit{pocset} $(P,\leq,\lnot,0)$ is a poset $(P,\leq)$ equipped with an order-reversing involution $\lnot:P\to P$ and a least element $0\neq\lnot0$ such that $0$ is the only lower-bound of $p,\lnot p$ for every $p\in P$.

        A \textit{profinite pocset} is a pocset $P$ equipped with a compact topology making $\lnot$ continuous and is \textit{totally order-disconnected}, in the sense that if $p\not\leq q$, then there is a clopen upward-closed $U\subseteq P$ with $p\in U\not\ni q$.
    \end{definition}

    \begin{remark}
        Such a topology is automatically Hausdorff and zero-dimensional.
    \end{remark}

    We are primarily interested in subpocsets of $(2^X,\subseteq,\lnot,\em)$, which is profinite if equipped with the product topology of the discrete space $2$. Indeed, $2^X$ admits a base of \textit{cylinder sets} $-$ which are finite intersections of sets of the form $\pi^{-1}_x(i)$ where $x\in X$, $i\in\l\{0,1\r\}$, and $\pi_x:2^X\to2$ is the projection $-$ making $\lnot$ continuous since cylinders are clopen. {\color{red}{Show that it is totally order-disconnected.}}

    The following proposition gives a sufficient criteria for subpocsets of $2^X$ to be profinite. We also show in this case that every non-trivial element $H\in\mc{H}^\ast$ is isolated, which will important in Section \ref{ssec:the_dual_median_graph_of_a_pocset}.

    \begin{proposition}\label{prp:finitely-separating_non-trivial_isolated}
        Let $X$ be a set and $\mc{H}\subseteq2^X$ be a subpocset. If $\mc{H}$ is finitely-separating, then $\mc{H}\subseteq2^X$ is closed and every non-trivial element is isolated.
    \end{proposition}
    \begin{proof}
        It suffices to show that the limit points of $\mc{H}$ are trivial, so let $A\in2^X\comp\l\{\em,X\r\}$. Fix $x\in A\not\ni y$. Since $\mc{H}$ is finitely-separating, there are finitely-many $H\in\mc{H}$ with $x\in H\not\ni y$, and for each such $H\in\mc{H}\comp\l\{A\r\}$, we have either some $x_H\in A\comp H$ or $y_H\in H\comp A$. Let $U\subseteq2^X$ be the family of all subsets $B\subseteq X$ containing $x$ and each $x_H$ but not $y$ or any $y_H$.

        This is the desired neighborhood isolating $A\in U$. Indeed, it is (cl)open since it is the \textit{finite} intersection of cylinders prescribed by the $x_H$'s and $y_H$'s, and it is disjoint from $\mc{H}\comp\l\{A\r\}$ by construction.
    \end{proof}

    \subsubsection{The pocset induced by a dense family cuts}

    \subsection{The dual median graph of a pocset}\label{ssec:the_dual_median_graph_of_a_pocset}

    Let $\mc{H}\subseteq2^X$ be a finitely-separating pocset, whose elements we call \textit{half-spaces}. By Proposition \ref{prp:finitely-separating_non-trivial_isolated}, $\mc{H}$ is profinite and every non-trivial element thereof is isolated.

    \begin{definition}\label{def:orientation}
        An \textit{orientation} on $\mc{H}$ is an upward-closed subset $U\subseteq\mc{H}$ containing exactly one of $H,\lnot H$ for each $H\in\mc{H}$. We let $\mc{U}(\mc{H})$ denote the set of all orientations on $\mc{H}$ and let $\mc{U}^\circ(\mc{H})$ denote the clopen ones.
    \end{definition}

    \begin{remark}
        Intuitively, an orientation is a `maximally consistent' choice of a half-space from each hyperplane. To formalize this, let $\sim$ be the equivalence relation on $\mc{H}$ given by $H\sim\lnot H$, and let $\del:\mc{H}\to\mc{H}/\!\!\sim$ be the quotient map. Orientations $U\subseteq\mc{H}$ then correspond precisely to sections $\phi:\mc{H}/\!\!\sim\,\to\mc{H}$ of $\del$ such that $\phi(\del H)\not\subseteq\lnot\phi(\del K)$ for every $H,K\in\mc{H}$; the latter condition rules out `orientations' of the form $\leftarrow\hspace{-4.7pt}|\,\,|\hspace{-4.7pt}\rightarrow$.
    \end{remark}

    \begin{example}
        Every $x\in X$ induces its \textit{principal orientation} $\widehat{x}\coloneqq\l\{H\in\mc{H}\st x\in H\r\}=\mc{H}\cap\pi^{-1}_x(1)$, which is clearly clopen in $\mc{H}$, and gives us a canonical map $\mf{p}:X\to\mc{U}^\circ(\mc{H})$. Note, however, that $\mf{p}$ is \textit{not necessarily} injective; we call a fiber $[x]_\mc{H}\coloneqq\mf{p}^{-1}(\widehat{x})=\l\{y\in X\st\widehat{x}=\widehat{y}\r\}$ an \textit{$\mc{H}$-block}.
    \end{example}

    % \begin{remark}
    %     The \textit{clopen} orientations are exactly those which are \textit{finitely-based}, in the sense that there is a $\subseteq$-minimal finite subset $U_0\subseteq U$ such that $U=\,\,\uparrow\!U_0$, where
    %     \begin{equation*}
    %         \uparrow\!U_0\coloneqq\bigcup_{H\in U_0}\!\uparrow\!H\coloneqq\bigcup_{H\in U_0}\!\l\{K\in\mc{H}:K\supseteq H\r\}.
    %     \end{equation*}
    %     Indeed, if $U$ is clopen, 
    % \end{remark}

    The goal of this section is to canonically construct a graph whose vertices are clopen orientations on $\mc{H}$.

    \begin{theorem}\label{thm:construction_of_dual_median_graph}
        
    \end{theorem}

    \subsection{Spanning trees of median graphs with finite hyperplanes}\label{ssec:spanning_trees_of_median_graphs_with_finite_hyperplanes}

    \begin{appendices}
        \section{Tree of orientations on a nested pocset of sets}

        Let $\mc{H}\subseteq2^X$ be a finitely-separating subpocset (see Definition \ref{sssec:profinite_pocsets}), so every non-trivial element is isolated by Proposition \ref{prp:finitely-separating_non-trivial_isolated}. As shown in Theorem \ref{thm:construction_of_dual_median_graph}, the clopen orientations $\mc{U}^\circ(\mc{H})$ form the vertices of a median graph, whose edges are given by `minimal base-flipping'.

        We devote this appendix to show that if $\mc{H}$ is \textit{nested}, then $\mc{U}^\circ(\mc{H})$ is in fact a tree, and so we may bypass the Borel cycle-cutting algorithm in Section \ref{ssec:spanning_trees_of_median_graphs_with_finite_hyperplanes} and obtain a treeing directly.
    \end{appendices}

    \begin{bibdiv}
        \begin{biblist}*{labels={alphabetic}}
            \bibselect{setup/bibliography}
        \end{biblist}
    \end{bibdiv}
\end{document}
